execute positioned ~1 ~ ~ if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute positioned ~-1 ~ ~ if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute positioned ~ ~1 ~ if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute positioned ~ ~-1 ~ if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute positioned ~ ~ ~1 if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute positioned ~ ~ ~-1 if block ~ ~ ~ #block_protec:piston_moving unless entity @e[type=marker,name=bp_piston,tag=bp_piston,distance=..0.1] run summon marker ~ ~ ~ {CustomName:"\"bp_piston\"",Tags:["bp_piston","bp_pistonNew"]}
execute as @e[type=marker,name=bp_piston,tag=bp_pistonNew,distance=..1.1] at @s run function block_protec:defined_zones/protec_border
kill @s